<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VR Mini View - WORKING VERSION</title>
  <style>
    body {
      margin: 20px;
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }

    #vrMiniView {
      display: none;
      margin-top: 20px;
      border: 2px solid #fff;
    }

    #vrButton {
      padding: 12px 22px;
      font-size: 18px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      background: #1e90ff;
      color: white;
    }
  </style>
</head>
<body>

  <h2>VR Mini View Demo</h2>
  <button id="vrButton">Open VR Mini View</button>

  <!-- fixed size canvas -->
  <canvas id="vrMiniView" width="500" height="350"></canvas>

  <!-- three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

  <!-- orbit controls -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

  <script>
    // get dom elements
    const btn = document.getElementById("vrButton");
    const canvas = document.getElementById("vrMiniView");

    // create renderer
    const renderer = new THREE.WebGLRenderer({
      canvas: canvas,
      antialias: true
    });

    renderer.setSize(canvas.width, canvas.height);

    // create scene
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x333333);

    // create camera
    const camera = new THREE.PerspectiveCamera(
      70,
      canvas.width / canvas.height,
      0.1,
      100
    );
    camera.position.set(1.5, 1, 2);

    // add controls
    const controls = new THREE.OrbitControls(camera, canvas);

    // add a spinning cube
    const cubeGeo = new THREE.BoxGeometry(1, 1, 1);
    const cubeMat = new THREE.MeshStandardMaterial({ color: 0x00ffcc });
    const cube = new THREE.Mesh(cubeGeo, cubeMat);
    scene.add(cube);

    // lighting
    const light1 = new THREE.HemisphereLight(0xffffff, 0x444444, 1.2);
    scene.add(light1);

    const light2 = new THREE.DirectionalLight(0xffffff, 1);
    light2.position.set(2, 2, 3);
    scene.add(light2);

    let started = false;

    // button click
    btn.onclick = () => {
      canvas.style.display = "block"; // show canvas

      if (!started) {
        started = true;

        // animation loop
        function animate() {
          requestAnimationFrame(animate);

          // rotate cube
          cube.rotation.x += 0.01;
          cube.rotation.y += 0.01;

          controls.update();
          renderer.render(scene, camera);
        }

        animate();
      }
    };
  </script>

</body>
</html>
